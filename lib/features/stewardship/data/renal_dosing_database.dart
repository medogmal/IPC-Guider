import '../domain/models/renal_function.dart';

/// Renal Dosing Database
/// Comprehensive antibiotic dosing adjustments for renal impairment
/// Based on FDA labels, Sanford Guide, and clinical guidelines
class RenalDosingDatabase {
  /// Get dose adjustment for a specific antibiotic and renal category
  static DoseAdjustment? getDoseAdjustment(
    String antibioticId,
    RenalCategory category,
  ) {
    final dosingData = _dosingDatabase[antibioticId];
    if (dosingData == null) return null;

    return dosingData[category];
  }

  /// Get all antibiotics with renal dosing data
  static List<String> getAllAntibioticIds() {
    return _dosingDatabase.keys.toList()..sort();
  }

  /// Get antibiotic name by ID
  static String getAntibioticName(String id) {
    return _antibioticNames[id] ?? id;
  }

  /// Check if antibiotic requires renal adjustment
  static bool requiresAdjustment(String antibioticId) {
    return _dosingDatabase.containsKey(antibioticId);
  }

  // Antibiotic names mapping
  static const Map<String, String> _antibioticNames = {
    'amoxicillin': 'Amoxicillin',
    'amoxicillin-clavulanate': 'Amoxicillin-Clavulanate',
    'ampicillin': 'Ampicillin',
    'piperacillin-tazobactam': 'Piperacillin-Tazobactam',
    'cefazolin': 'Cefazolin',
    'cefuroxime': 'Cefuroxime',
    'ceftriaxone': 'Ceftriaxone',
    'cefepime': 'Cefepime',
    'ceftazidime': 'Ceftazidime',
    'meropenem': 'Meropenem',
    'imipenem': 'Imipenem-Cilastatin',
    'ertapenem': 'Ertapenem',
    'gentamicin': 'Gentamicin',
    'amikacin': 'Amikacin',
    'tobramycin': 'Tobramycin',
    'vancomycin': 'Vancomycin',
    'ciprofloxacin': 'Ciprofloxacin',
    'levofloxacin': 'Levofloxacin',
    'moxifloxacin': 'Moxifloxacin',
    'trimethoprim-sulfamethoxazole': 'Trimethoprim-Sulfamethoxazole',
    'metronidazole': 'Metronidazole',
    'linezolid': 'Linezolid',
    'daptomycin': 'Daptomycin',
    'azithromycin': 'Azithromycin',
    'clindamycin': 'Clindamycin',
  };

  // Comprehensive dosing database
  static final Map<String, Map<RenalCategory, DoseAdjustment>> _dosingDatabase = {
    'vancomycin': {
      RenalCategory.normal: DoseAdjustment(
        antibioticId: 'vancomycin',
        antibioticName: 'Vancomycin',
        renalCategory: RenalCategory.normal,
        normalDose: '15-20 mg/kg IV q8-12h',
        adjustedDose: '15-20 mg/kg IV q8-12h',
        interval: 'Every 8-12 hours',
        loadingDose: '25-30 mg/kg IV × 1 (for severe infections)',
        rationale: 'Normal renal function - standard dosing',
        warnings: ['Monitor trough levels (target 10-20 mcg/mL)', 'Adjust based on levels'],
        monitoring: ['Trough before 4th dose', 'SCr every 2-3 days', 'Ototoxicity monitoring'],
      ),
      RenalCategory.mild: DoseAdjustment(
        antibioticId: 'vancomycin',
        antibioticName: 'Vancomycin',
        renalCategory: RenalCategory.mild,
        normalDose: '15-20 mg/kg IV q8-12h',
        adjustedDose: '15-20 mg/kg IV q12-24h',
        interval: 'Every 12-24 hours',
        loadingDose: '25-30 mg/kg IV × 1 (for severe infections)',
        rationale: 'Mild impairment - extend interval',
        warnings: ['Monitor trough levels closely', 'Risk of accumulation'],
        monitoring: ['Trough before 3rd-4th dose', 'SCr daily', 'Ototoxicity monitoring'],
      ),
      RenalCategory.moderate: DoseAdjustment(
        antibioticId: 'vancomycin',
        antibioticName: 'Vancomycin',
        renalCategory: RenalCategory.moderate,
        normalDose: '15-20 mg/kg IV q8-12h',
        adjustedDose: '10-15 mg/kg IV q24-48h',
        interval: 'Every 24-48 hours',
        loadingDose: '25-30 mg/kg IV × 1 (recommended)',
        rationale: 'Moderate impairment - reduce dose and extend interval',
        warnings: ['Mandatory trough monitoring', 'High risk of accumulation', 'Nephrotoxicity risk'],
        monitoring: ['Trough before each dose', 'SCr daily', 'Ototoxicity monitoring'],
      ),
      RenalCategory.severe: DoseAdjustment(
        antibioticId: 'vancomycin',
        antibioticName: 'Vancomycin',
        renalCategory: RenalCategory.severe,
        normalDose: '15-20 mg/kg IV q8-12h',
        adjustedDose: '10-15 mg/kg IV q48-96h',
        interval: 'Every 48-96 hours',
        loadingDose: '25-30 mg/kg IV × 1 (recommended)',
        rationale: 'Severe impairment - individualize based on levels',
        warnings: ['Dose only based on levels', 'Very high risk of toxicity', 'Consider alternatives'],
        monitoring: ['Trough before each dose', 'SCr daily', 'Ototoxicity monitoring', 'Consider pharmacist consult'],
        hemodialysisNote: 'Loading dose 15-20 mg/kg, then dose based on levels (typically 500-1000 mg after each HD session)',
      ),
      RenalCategory.esrd: DoseAdjustment(
        antibioticId: 'vancomycin',
        antibioticName: 'Vancomycin',
        renalCategory: RenalCategory.esrd,
        normalDose: '15-20 mg/kg IV q8-12h',
        adjustedDose: 'Individualize based on levels',
        interval: 'Based on levels',
        loadingDose: '25-30 mg/kg IV × 1 (recommended)',
        rationale: 'ESRD - dose only based on therapeutic drug monitoring',
        warnings: ['Mandatory TDM', 'Extreme toxicity risk', 'Pharmacist consultation required'],
        monitoring: ['Trough before each dose', 'SCr with each dialysis', 'Ototoxicity monitoring'],
        hemodialysisNote: 'Loading dose 15-20 mg/kg, then 500-1000 mg after each HD session, adjust based on levels',
        crrtNote: 'Loading dose 25-30 mg/kg, then 7.5-10 mg/kg q12-24h, adjust based on levels and CRRT settings',
      ),
    },
    'meropenem': {
      RenalCategory.normal: DoseAdjustment(
        antibioticId: 'meropenem',
        antibioticName: 'Meropenem',
        renalCategory: RenalCategory.normal,
        normalDose: '1-2 g IV q8h',
        adjustedDose: '1-2 g IV q8h',
        interval: 'Every 8 hours',
        rationale: 'Normal renal function - standard dosing',
        warnings: ['Seizure risk with high doses or CNS infections'],
        monitoring: ['Clinical response', 'SCr baseline and periodically'],
      ),
      RenalCategory.mild: DoseAdjustment(
        antibioticId: 'meropenem',
        antibioticName: 'Meropenem',
        renalCategory: RenalCategory.mild,
        normalDose: '1-2 g IV q8h',
        adjustedDose: '1-2 g IV q8h',
        interval: 'Every 8 hours',
        rationale: 'Mild impairment - no adjustment needed',
        warnings: ['Monitor for seizures', 'Watch renal function'],
        monitoring: ['Clinical response', 'SCr every 2-3 days'],
      ),
      RenalCategory.moderate: DoseAdjustment(
        antibioticId: 'meropenem',
        antibioticName: 'Meropenem',
        renalCategory: RenalCategory.moderate,
        normalDose: '1-2 g IV q8h',
        adjustedDose: '1 g IV q12h',
        interval: 'Every 12 hours',
        rationale: 'Moderate impairment - reduce dose or extend interval',
        warnings: ['Increased seizure risk', 'Monitor renal function closely'],
        monitoring: ['Clinical response', 'SCr daily', 'Neurological status'],
      ),
      RenalCategory.severe: DoseAdjustment(
        antibioticId: 'meropenem',
        antibioticName: 'Meropenem',
        renalCategory: RenalCategory.severe,
        normalDose: '1-2 g IV q8h',
        adjustedDose: '500 mg IV q12-24h',
        interval: 'Every 12-24 hours',
        rationale: 'Severe impairment - significant dose reduction required',
        warnings: ['High seizure risk', 'Consider alternative if possible'],
        monitoring: ['Clinical response', 'SCr daily', 'Neurological status'],
        hemodialysisNote: '500 mg IV q24h, give after HD on dialysis days',
      ),
      RenalCategory.esrd: DoseAdjustment(
        antibioticId: 'meropenem',
        antibioticName: 'Meropenem',
        renalCategory: RenalCategory.esrd,
        normalDose: '1-2 g IV q8h',
        adjustedDose: '500 mg IV q24h',
        interval: 'Every 24 hours',
        rationale: 'ESRD - minimal dosing required',
        warnings: ['Very high seizure risk', 'Consider alternative carbapenem'],
        monitoring: ['Clinical response', 'Neurological status', 'SCr with dialysis'],
        hemodialysisNote: '500 mg IV after each HD session',
        crrtNote: '1 g IV q12h (adjust based on CRRT settings)',
      ),
    },
    'piperacillin-tazobactam': {
      RenalCategory.normal: DoseAdjustment(
        antibioticId: 'piperacillin-tazobactam',
        antibioticName: 'Piperacillin-Tazobactam',
        renalCategory: RenalCategory.normal,
        normalDose: '3.375-4.5 g IV q6-8h',
        adjustedDose: '3.375-4.5 g IV q6-8h',
        interval: 'Every 6-8 hours',
        rationale: 'Normal renal function - standard dosing',
        warnings: ['Monitor for bleeding (platelet dysfunction)', 'Hypokalemia risk'],
        monitoring: ['Clinical response', 'CBC', 'Electrolytes'],
      ),
      RenalCategory.mild: DoseAdjustment(
        antibioticId: 'piperacillin-tazobactam',
        antibioticName: 'Piperacillin-Tazobactam',
        renalCategory: RenalCategory.mild,
        normalDose: '3.375-4.5 g IV q6-8h',
        adjustedDose: '3.375-4.5 g IV q8h',
        interval: 'Every 8 hours',
        rationale: 'Mild impairment - extend interval',
        warnings: ['Monitor for bleeding', 'Watch electrolytes'],
        monitoring: ['Clinical response', 'CBC', 'Electrolytes', 'SCr'],
      ),
      RenalCategory.moderate: DoseAdjustment(
        antibioticId: 'piperacillin-tazobactam',
        antibioticName: 'Piperacillin-Tazobactam',
        renalCategory: RenalCategory.moderate,
        normalDose: '3.375-4.5 g IV q6-8h',
        adjustedDose: '2.25-3.375 g IV q8h',
        interval: 'Every 8 hours',
        rationale: 'Moderate impairment - reduce dose',
        warnings: ['Increased bleeding risk', 'Monitor electrolytes closely'],
        monitoring: ['Clinical response', 'CBC daily', 'Electrolytes daily', 'SCr daily'],
      ),
      RenalCategory.severe: DoseAdjustment(
        antibioticId: 'piperacillin-tazobactam',
        antibioticName: 'Piperacillin-Tazobactam',
        renalCategory: RenalCategory.severe,
        normalDose: '3.375-4.5 g IV q6-8h',
        adjustedDose: '2.25 g IV q8-12h',
        interval: 'Every 8-12 hours',
        rationale: 'Severe impairment - significant dose reduction',
        warnings: ['High bleeding risk', 'Severe hypokalemia risk'],
        monitoring: ['Clinical response', 'CBC daily', 'Electrolytes daily', 'SCr daily'],
        hemodialysisNote: '2.25 g IV q12h, give additional 0.75 g after each HD session',
      ),
      RenalCategory.esrd: DoseAdjustment(
        antibioticId: 'piperacillin-tazobactam',
        antibioticName: 'Piperacillin-Tazobactam',
        renalCategory: RenalCategory.esrd,
        normalDose: '3.375-4.5 g IV q6-8h',
        adjustedDose: '2.25 g IV q12h',
        interval: 'Every 12 hours',
        rationale: 'ESRD - minimal dosing',
        warnings: ['Very high bleeding risk', 'Severe electrolyte disturbances'],
        monitoring: ['Clinical response', 'CBC daily', 'Electrolytes daily'],
        hemodialysisNote: '2.25 g IV q12h, give additional 0.75 g after each HD session',
        crrtNote: '3.375 g IV q8h (adjust based on CRRT settings)',
      ),
    },
    'gentamicin': {
      RenalCategory.normal: DoseAdjustment(
        antibioticId: 'gentamicin',
        antibioticName: 'Gentamicin',
        renalCategory: RenalCategory.normal,
        normalDose: '5-7 mg/kg IV q24h',
        adjustedDose: '5-7 mg/kg IV q24h',
        interval: 'Every 24 hours',
        rationale: 'Normal renal function - standard once-daily dosing',
        warnings: ['Nephrotoxicity risk', 'Ototoxicity risk', 'Monitor levels'],
        monitoring: ['Peak 30 min after infusion (target 20-30 mcg/mL)', 'Trough before next dose (target <1 mcg/mL)', 'SCr daily', 'Hearing assessment'],
      ),
      RenalCategory.mild: DoseAdjustment(
        antibioticId: 'gentamicin',
        antibioticName: 'Gentamicin',
        renalCategory: RenalCategory.mild,
        normalDose: '5-7 mg/kg IV q24h',
        adjustedDose: '5-7 mg/kg IV q36h',
        interval: 'Every 36 hours',
        rationale: 'Mild impairment - extend interval',
        warnings: ['Increased nephrotoxicity risk', 'Monitor levels closely'],
        monitoring: ['Peak and trough levels', 'SCr every 2-3 days', 'Hearing assessment'],
      ),
      RenalCategory.moderate: DoseAdjustment(
        antibioticId: 'gentamicin',
        antibioticName: 'Gentamicin',
        renalCategory: RenalCategory.moderate,
        normalDose: '5-7 mg/kg IV q24h',
        adjustedDose: '5-7 mg/kg IV q48h',
        interval: 'Every 48 hours',
        rationale: 'Moderate impairment - significant interval extension',
        warnings: ['High nephrotoxicity risk', 'Consider alternative if possible'],
        monitoring: ['Peak and trough levels mandatory', 'SCr daily', 'Hearing assessment', 'Consider shorter course'],
      ),
      RenalCategory.severe: DoseAdjustment(
        antibioticId: 'gentamicin',
        antibioticName: 'Gentamicin',
        renalCategory: RenalCategory.severe,
        normalDose: '5-7 mg/kg IV q24h',
        adjustedDose: '3-5 mg/kg IV q48-72h',
        interval: 'Every 48-72 hours',
        rationale: 'Severe impairment - reduce dose and extend interval',
        warnings: ['Very high nephrotoxicity risk', 'Strongly consider alternative'],
        monitoring: ['Peak and trough levels mandatory', 'SCr daily', 'Hearing assessment', 'Limit duration'],
        hemodialysisNote: '2-3 mg/kg after each HD session, monitor levels',
      ),
      RenalCategory.esrd: DoseAdjustment(
        antibioticId: 'gentamicin',
        antibioticName: 'Gentamicin',
        renalCategory: RenalCategory.esrd,
        normalDose: '5-7 mg/kg IV q24h',
        adjustedDose: '2-3 mg/kg IV after HD',
        interval: 'After each HD session',
        rationale: 'ESRD - dose after dialysis only',
        warnings: ['Extreme nephrotoxicity risk', 'Use only if no alternative'],
        monitoring: ['Peak and trough levels mandatory', 'Hearing assessment', 'Minimize duration'],
        hemodialysisNote: '2-3 mg/kg after each HD session, check levels before next dose',
        crrtNote: '5-7 mg/kg IV q48h, adjust based on levels',
      ),
    },
    'ciprofloxacin': {
      RenalCategory.normal: DoseAdjustment(
        antibioticId: 'ciprofloxacin',
        antibioticName: 'Ciprofloxacin',
        renalCategory: RenalCategory.normal,
        normalDose: '400 mg IV q8-12h or 500-750 mg PO q12h',
        adjustedDose: '400 mg IV q8-12h or 500-750 mg PO q12h',
        interval: 'Every 8-12 hours',
        rationale: 'Normal renal function - standard dosing',
        warnings: ['Tendon rupture risk', 'QT prolongation', 'CNS effects'],
        monitoring: ['Clinical response', 'Tendon pain', 'ECG if risk factors'],
      ),
      RenalCategory.mild: DoseAdjustment(
        antibioticId: 'ciprofloxacin',
        antibioticName: 'Ciprofloxacin',
        renalCategory: RenalCategory.mild,
        normalDose: '400 mg IV q8-12h or 500-750 mg PO q12h',
        adjustedDose: '400 mg IV q12h or 500-750 mg PO q12h',
        interval: 'Every 12 hours',
        rationale: 'Mild impairment - no significant adjustment needed',
        warnings: ['Tendon rupture risk', 'Monitor renal function'],
        monitoring: ['Clinical response', 'SCr periodically'],
      ),
      RenalCategory.moderate: DoseAdjustment(
        antibioticId: 'ciprofloxacin',
        antibioticName: 'Ciprofloxacin',
        renalCategory: RenalCategory.moderate,
        normalDose: '400 mg IV q8-12h or 500-750 mg PO q12h',
        adjustedDose: '200-400 mg IV q12-24h or 250-500 mg PO q12-24h',
        interval: 'Every 12-24 hours',
        rationale: 'Moderate impairment - reduce dose or extend interval',
        warnings: ['Increased CNS effects', 'Monitor closely'],
        monitoring: ['Clinical response', 'SCr every 2-3 days', 'Neurological status'],
      ),
      RenalCategory.severe: DoseAdjustment(
        antibioticId: 'ciprofloxacin',
        antibioticName: 'Ciprofloxacin',
        renalCategory: RenalCategory.severe,
        normalDose: '400 mg IV q8-12h or 500-750 mg PO q12h',
        adjustedDose: '200 mg IV q24h or 250-500 mg PO q24h',
        interval: 'Every 24 hours',
        rationale: 'Severe impairment - significant dose reduction',
        warnings: ['High CNS effects risk', 'Crystalluria risk'],
        monitoring: ['Clinical response', 'SCr daily', 'Neurological status', 'Adequate hydration'],
        hemodialysisNote: '200-400 mg after HD session',
      ),
      RenalCategory.esrd: DoseAdjustment(
        antibioticId: 'ciprofloxacin',
        antibioticName: 'Ciprofloxacin',
        renalCategory: RenalCategory.esrd,
        normalDose: '400 mg IV q8-12h or 500-750 mg PO q12h',
        adjustedDose: '200 mg IV/PO q24h',
        interval: 'Every 24 hours',
        rationale: 'ESRD - minimal dosing',
        warnings: ['Very high CNS effects risk', 'Accumulation risk'],
        monitoring: ['Clinical response', 'Neurological status'],
        hemodialysisNote: '250-500 mg after each HD session',
        crrtNote: '200-400 mg IV q12-24h',
      ),
    },
    'levofloxacin': {
      RenalCategory.normal: DoseAdjustment(
        antibioticId: 'levofloxacin',
        antibioticName: 'Levofloxacin',
        renalCategory: RenalCategory.normal,
        normalDose: '500-750 mg IV/PO q24h',
        adjustedDose: '500-750 mg IV/PO q24h',
        interval: 'Every 24 hours',
        rationale: 'Normal renal function - standard dosing',
        warnings: ['Tendon rupture risk', 'QT prolongation', 'CNS effects'],
        monitoring: ['Clinical response', 'Tendon pain', 'ECG if risk factors'],
      ),
      RenalCategory.mild: DoseAdjustment(
        antibioticId: 'levofloxacin',
        antibioticName: 'Levofloxacin',
        renalCategory: RenalCategory.mild,
        normalDose: '500-750 mg IV/PO q24h',
        adjustedDose: '500-750 mg IV/PO q24h',
        interval: 'Every 24 hours',
        rationale: 'Mild impairment - no adjustment needed',
        warnings: ['Tendon rupture risk', 'Monitor renal function'],
        monitoring: ['Clinical response', 'SCr periodically'],
      ),
      RenalCategory.moderate: DoseAdjustment(
        antibioticId: 'levofloxacin',
        antibioticName: 'Levofloxacin',
        renalCategory: RenalCategory.moderate,
        normalDose: '500-750 mg IV/PO q24h',
        adjustedDose: '750 mg initial, then 500 mg q48h OR 250-500 mg q24h',
        interval: 'Every 24-48 hours',
        rationale: 'Moderate impairment - dose reduction required',
        warnings: ['Increased CNS effects', 'Monitor closely'],
        monitoring: ['Clinical response', 'SCr every 2-3 days', 'Neurological status'],
      ),
      RenalCategory.severe: DoseAdjustment(
        antibioticId: 'levofloxacin',
        antibioticName: 'Levofloxacin',
        renalCategory: RenalCategory.severe,
        normalDose: '500-750 mg IV/PO q24h',
        adjustedDose: '750 mg initial, then 500 mg q48h OR 250 mg q24h',
        interval: 'Every 24-48 hours',
        rationale: 'Severe impairment - significant dose reduction',
        warnings: ['High CNS effects risk', 'Accumulation risk'],
        monitoring: ['Clinical response', 'SCr daily', 'Neurological status'],
        hemodialysisNote: '750 mg initial, then 500 mg q48h',
      ),
      RenalCategory.esrd: DoseAdjustment(
        antibioticId: 'levofloxacin',
        antibioticName: 'Levofloxacin',
        renalCategory: RenalCategory.esrd,
        normalDose: '500-750 mg IV/PO q24h',
        adjustedDose: '750 mg initial, then 500 mg q48h',
        interval: 'Every 48 hours',
        rationale: 'ESRD - minimal dosing with loading dose',
        warnings: ['Very high CNS effects risk', 'Accumulation risk'],
        monitoring: ['Clinical response', 'Neurological status'],
        hemodialysisNote: '750 mg initial, then 500 mg q48h (no supplemental dose)',
        crrtNote: '750 mg initial, then 500 mg q24h',
      ),
    },
    'cefazolin': {
      RenalCategory.normal: DoseAdjustment(
        antibioticId: 'cefazolin',
        antibioticName: 'Cefazolin',
        renalCategory: RenalCategory.normal,
        normalDose: '1-2 g IV q8h',
        adjustedDose: '1-2 g IV q8h',
        interval: 'Every 8 hours',
        rationale: 'Normal renal function - standard dosing',
        warnings: ['Hypersensitivity reactions', 'Monitor for C. difficile'],
        monitoring: ['Clinical response', 'Signs of allergy'],
      ),
      RenalCategory.mild: DoseAdjustment(
        antibioticId: 'cefazolin',
        antibioticName: 'Cefazolin',
        renalCategory: RenalCategory.mild,
        normalDose: '1-2 g IV q8h',
        adjustedDose: '1-2 g IV q8h',
        interval: 'Every 8 hours',
        rationale: 'Mild impairment - no adjustment needed',
        warnings: ['Monitor renal function'],
        monitoring: ['Clinical response', 'SCr periodically'],
      ),
      RenalCategory.moderate: DoseAdjustment(
        antibioticId: 'cefazolin',
        antibioticName: 'Cefazolin',
        renalCategory: RenalCategory.moderate,
        normalDose: '1-2 g IV q8h',
        adjustedDose: '1-2 g IV q12h',
        interval: 'Every 12 hours',
        rationale: 'Moderate impairment - extend interval',
        warnings: ['Monitor renal function closely'],
        monitoring: ['Clinical response', 'SCr every 2-3 days'],
      ),
      RenalCategory.severe: DoseAdjustment(
        antibioticId: 'cefazolin',
        antibioticName: 'Cefazolin',
        renalCategory: RenalCategory.severe,
        normalDose: '1-2 g IV q8h',
        adjustedDose: '1 g IV q24h',
        interval: 'Every 24 hours',
        rationale: 'Severe impairment - significant dose reduction',
        warnings: ['Accumulation risk'],
        monitoring: ['Clinical response', 'SCr daily'],
        hemodialysisNote: '1-2 g after each HD session',
      ),
      RenalCategory.esrd: DoseAdjustment(
        antibioticId: 'cefazolin',
        antibioticName: 'Cefazolin',
        renalCategory: RenalCategory.esrd,
        normalDose: '1-2 g IV q8h',
        adjustedDose: '1 g IV q24-48h',
        interval: 'Every 24-48 hours',
        rationale: 'ESRD - minimal dosing',
        warnings: ['Significant accumulation risk'],
        monitoring: ['Clinical response'],
        hemodialysisNote: '1-2 g after each HD session',
        crrtNote: '1-2 g IV q12h',
      ),
    },
    'cefepime': {
      RenalCategory.normal: DoseAdjustment(
        antibioticId: 'cefepime',
        antibioticName: 'Cefepime',
        renalCategory: RenalCategory.normal,
        normalDose: '1-2 g IV q8-12h',
        adjustedDose: '1-2 g IV q8-12h',
        interval: 'Every 8-12 hours',
        rationale: 'Normal renal function - standard dosing',
        warnings: ['Neurotoxicity risk (seizures, encephalopathy)', 'Monitor for C. difficile'],
        monitoring: ['Clinical response', 'Neurological status'],
      ),
      RenalCategory.mild: DoseAdjustment(
        antibioticId: 'cefepime',
        antibioticName: 'Cefepime',
        renalCategory: RenalCategory.mild,
        normalDose: '1-2 g IV q8-12h',
        adjustedDose: '1-2 g IV q12h',
        interval: 'Every 12 hours',
        rationale: 'Mild impairment - extend interval',
        warnings: ['Increased neurotoxicity risk', 'Monitor closely'],
        monitoring: ['Clinical response', 'Neurological status', 'SCr'],
      ),
      RenalCategory.moderate: DoseAdjustment(
        antibioticId: 'cefepime',
        antibioticName: 'Cefepime',
        renalCategory: RenalCategory.moderate,
        normalDose: '1-2 g IV q8-12h',
        adjustedDose: '1-2 g IV q24h',
        interval: 'Every 24 hours',
        rationale: 'Moderate impairment - significant interval extension',
        warnings: ['High neurotoxicity risk', 'Monitor neurological status'],
        monitoring: ['Clinical response', 'Neurological status daily', 'SCr daily'],
      ),
      RenalCategory.severe: DoseAdjustment(
        antibioticId: 'cefepime',
        antibioticName: 'Cefepime',
        renalCategory: RenalCategory.severe,
        normalDose: '1-2 g IV q8-12h',
        adjustedDose: '0.5-1 g IV q24h',
        interval: 'Every 24 hours',
        rationale: 'Severe impairment - reduce dose and extend interval',
        warnings: ['Very high neurotoxicity risk', 'Consider alternative'],
        monitoring: ['Clinical response', 'Neurological status daily', 'SCr daily', 'EEG if altered mental status'],
        hemodialysisNote: '1 g after each HD session',
      ),
      RenalCategory.esrd: DoseAdjustment(
        antibioticId: 'cefepime',
        antibioticName: 'Cefepime',
        renalCategory: RenalCategory.esrd,
        normalDose: '1-2 g IV q8-12h',
        adjustedDose: '0.5-1 g IV q24-48h',
        interval: 'Every 24-48 hours',
        rationale: 'ESRD - minimal dosing',
        warnings: ['Extreme neurotoxicity risk', 'Strongly consider alternative'],
        monitoring: ['Clinical response', 'Neurological status daily', 'EEG if any CNS symptoms'],
        hemodialysisNote: '1 g after each HD session',
        crrtNote: '1-2 g IV q12-24h',
      ),
    },
    'amikacin': {
      RenalCategory.normal: DoseAdjustment(
        antibioticId: 'amikacin',
        antibioticName: 'Amikacin',
        renalCategory: RenalCategory.normal,
        normalDose: '15-20 mg/kg IV q24h',
        adjustedDose: '15-20 mg/kg IV q24h',
        interval: 'Every 24 hours',
        rationale: 'Normal renal function - standard once-daily dosing',
        warnings: ['Nephrotoxicity risk', 'Ototoxicity risk', 'Monitor levels'],
        monitoring: ['Peak 30 min after infusion (target 60-80 mcg/mL)', 'Trough before next dose (target <5 mcg/mL)', 'SCr daily', 'Hearing assessment'],
      ),
      RenalCategory.mild: DoseAdjustment(
        antibioticId: 'amikacin',
        antibioticName: 'Amikacin',
        renalCategory: RenalCategory.mild,
        normalDose: '15-20 mg/kg IV q24h',
        adjustedDose: '15-20 mg/kg IV q36h',
        interval: 'Every 36 hours',
        rationale: 'Mild impairment - extend interval',
        warnings: ['Increased nephrotoxicity risk', 'Monitor levels closely'],
        monitoring: ['Peak and trough levels', 'SCr every 2-3 days', 'Hearing assessment'],
      ),
      RenalCategory.moderate: DoseAdjustment(
        antibioticId: 'amikacin',
        antibioticName: 'Amikacin',
        renalCategory: RenalCategory.moderate,
        normalDose: '15-20 mg/kg IV q24h',
        adjustedDose: '15-20 mg/kg IV q48h',
        interval: 'Every 48 hours',
        rationale: 'Moderate impairment - significant interval extension',
        warnings: ['High nephrotoxicity risk', 'Consider alternative if possible'],
        monitoring: ['Peak and trough levels mandatory', 'SCr daily', 'Hearing assessment', 'Consider shorter course'],
      ),
      RenalCategory.severe: DoseAdjustment(
        antibioticId: 'amikacin',
        antibioticName: 'Amikacin',
        renalCategory: RenalCategory.severe,
        normalDose: '15-20 mg/kg IV q24h',
        adjustedDose: '10-15 mg/kg IV q48-72h',
        interval: 'Every 48-72 hours',
        rationale: 'Severe impairment - reduce dose and extend interval',
        warnings: ['Very high nephrotoxicity risk', 'Strongly consider alternative'],
        monitoring: ['Peak and trough levels mandatory', 'SCr daily', 'Hearing assessment', 'Limit duration'],
        hemodialysisNote: '7.5 mg/kg after each HD session, monitor levels',
      ),
      RenalCategory.esrd: DoseAdjustment(
        antibioticId: 'amikacin',
        antibioticName: 'Amikacin',
        renalCategory: RenalCategory.esrd,
        normalDose: '15-20 mg/kg IV q24h',
        adjustedDose: '7.5 mg/kg IV after HD',
        interval: 'After each HD session',
        rationale: 'ESRD - dose after dialysis only',
        warnings: ['Extreme nephrotoxicity risk', 'Use only if no alternative'],
        monitoring: ['Peak and trough levels mandatory', 'Hearing assessment', 'Minimize duration'],
        hemodialysisNote: '7.5 mg/kg after each HD session, check levels before next dose',
        crrtNote: '15-20 mg/kg IV q48h, adjust based on levels',
      ),
    },
    'ampicillin': {
      RenalCategory.normal: DoseAdjustment(
        antibioticId: 'ampicillin',
        antibioticName: 'Ampicillin',
        renalCategory: RenalCategory.normal,
        normalDose: '1-2 g IV q4-6h',
        adjustedDose: '1-2 g IV q4-6h',
        interval: 'Every 4-6 hours',
        rationale: 'Normal renal function - standard dosing',
        warnings: ['Hypersensitivity reactions', 'Monitor for C. difficile'],
        monitoring: ['Clinical response', 'Signs of allergy'],
      ),
      RenalCategory.mild: DoseAdjustment(
        antibioticId: 'ampicillin',
        antibioticName: 'Ampicillin',
        renalCategory: RenalCategory.mild,
        normalDose: '1-2 g IV q4-6h',
        adjustedDose: '1-2 g IV q6h',
        interval: 'Every 6 hours',
        rationale: 'Mild impairment - extend interval',
        warnings: ['Monitor renal function'],
        monitoring: ['Clinical response', 'SCr periodically'],
      ),
      RenalCategory.moderate: DoseAdjustment(
        antibioticId: 'ampicillin',
        antibioticName: 'Ampicillin',
        renalCategory: RenalCategory.moderate,
        normalDose: '1-2 g IV q4-6h',
        adjustedDose: '1-2 g IV q6-12h',
        interval: 'Every 6-12 hours',
        rationale: 'Moderate impairment - extend interval',
        warnings: ['Monitor renal function closely'],
        monitoring: ['Clinical response', 'SCr every 2-3 days'],
      ),
      RenalCategory.severe: DoseAdjustment(
        antibioticId: 'ampicillin',
        antibioticName: 'Ampicillin',
        renalCategory: RenalCategory.severe,
        normalDose: '1-2 g IV q4-6h',
        adjustedDose: '1-2 g IV q12-24h',
        interval: 'Every 12-24 hours',
        rationale: 'Severe impairment - significant interval extension',
        warnings: ['Accumulation risk'],
        monitoring: ['Clinical response', 'SCr daily'],
        hemodialysisNote: '1-2 g after each HD session',
      ),
      RenalCategory.esrd: DoseAdjustment(
        antibioticId: 'ampicillin',
        antibioticName: 'Ampicillin',
        renalCategory: RenalCategory.esrd,
        normalDose: '1-2 g IV q4-6h',
        adjustedDose: '1-2 g IV q24h',
        interval: 'Every 24 hours',
        rationale: 'ESRD - minimal dosing',
        warnings: ['Significant accumulation risk'],
        monitoring: ['Clinical response'],
        hemodialysisNote: '1-2 g after each HD session',
        crrtNote: '1-2 g IV q8-12h',
      ),
    },
    'aztreonam': {
      RenalCategory.normal: DoseAdjustment(
        antibioticId: 'aztreonam',
        antibioticName: 'Aztreonam',
        renalCategory: RenalCategory.normal,
        normalDose: '1-2 g IV q6-8h',
        adjustedDose: '1-2 g IV q6-8h',
        interval: 'Every 6-8 hours',
        rationale: 'Normal renal function - standard dosing',
        warnings: ['Safe in penicillin allergy', 'Monitor for C. difficile'],
        monitoring: ['Clinical response'],
      ),
      RenalCategory.mild: DoseAdjustment(
        antibioticId: 'aztreonam',
        antibioticName: 'Aztreonam',
        renalCategory: RenalCategory.mild,
        normalDose: '1-2 g IV q6-8h',
        adjustedDose: '1-2 g IV q8h',
        interval: 'Every 8 hours',
        rationale: 'Mild impairment - extend interval',
        warnings: ['Monitor renal function'],
        monitoring: ['Clinical response', 'SCr periodically'],
      ),
      RenalCategory.moderate: DoseAdjustment(
        antibioticId: 'aztreonam',
        antibioticName: 'Aztreonam',
        renalCategory: RenalCategory.moderate,
        normalDose: '1-2 g IV q6-8h',
        adjustedDose: '1-2 g IV q12h',
        interval: 'Every 12 hours',
        rationale: 'Moderate impairment - extend interval',
        warnings: ['Monitor renal function closely'],
        monitoring: ['Clinical response', 'SCr every 2-3 days'],
      ),
      RenalCategory.severe: DoseAdjustment(
        antibioticId: 'aztreonam',
        antibioticName: 'Aztreonam',
        renalCategory: RenalCategory.severe,
        normalDose: '1-2 g IV q6-8h',
        adjustedDose: '0.5-1 g IV q12-24h',
        interval: 'Every 12-24 hours',
        rationale: 'Severe impairment - reduce dose and extend interval',
        warnings: ['Accumulation risk'],
        monitoring: ['Clinical response', 'SCr daily'],
        hemodialysisNote: '1 g after each HD session',
      ),
      RenalCategory.esrd: DoseAdjustment(
        antibioticId: 'aztreonam',
        antibioticName: 'Aztreonam',
        renalCategory: RenalCategory.esrd,
        normalDose: '1-2 g IV q6-8h',
        adjustedDose: '0.5 g IV q24h',
        interval: 'Every 24 hours',
        rationale: 'ESRD - minimal dosing',
        warnings: ['Significant accumulation risk'],
        monitoring: ['Clinical response'],
        hemodialysisNote: '1 g after each HD session',
        crrtNote: '1-2 g IV q12h',
      ),
    },
    'imipenem': {
      RenalCategory.normal: DoseAdjustment(
        antibioticId: 'imipenem',
        antibioticName: 'Imipenem-Cilastatin',
        renalCategory: RenalCategory.normal,
        normalDose: '500 mg IV q6h or 1 g IV q8h',
        adjustedDose: '500 mg IV q6h or 1 g IV q8h',
        interval: 'Every 6-8 hours',
        rationale: 'Normal renal function - standard dosing',
        warnings: ['Seizure risk with high doses or CNS infections', 'Lower threshold than meropenem'],
        monitoring: ['Clinical response', 'Neurological status', 'SCr baseline'],
      ),
      RenalCategory.mild: DoseAdjustment(
        antibioticId: 'imipenem',
        antibioticName: 'Imipenem-Cilastatin',
        renalCategory: RenalCategory.mild,
        normalDose: '500 mg IV q6h or 1 g IV q8h',
        adjustedDose: '500 mg IV q6-8h',
        interval: 'Every 6-8 hours',
        rationale: 'Mild impairment - reduce dose',
        warnings: ['Increased seizure risk', 'Monitor closely'],
        monitoring: ['Clinical response', 'Neurological status', 'SCr every 2-3 days'],
      ),
      RenalCategory.moderate: DoseAdjustment(
        antibioticId: 'imipenem',
        antibioticName: 'Imipenem-Cilastatin',
        renalCategory: RenalCategory.moderate,
        normalDose: '500 mg IV q6h or 1 g IV q8h',
        adjustedDose: '250-500 mg IV q8-12h',
        interval: 'Every 8-12 hours',
        rationale: 'Moderate impairment - significant dose reduction',
        warnings: ['High seizure risk', 'Consider meropenem instead'],
        monitoring: ['Clinical response', 'Neurological status daily', 'SCr daily'],
      ),
      RenalCategory.severe: DoseAdjustment(
        antibioticId: 'imipenem',
        antibioticName: 'Imipenem-Cilastatin',
        renalCategory: RenalCategory.severe,
        normalDose: '500 mg IV q6h or 1 g IV q8h',
        adjustedDose: '250 mg IV q12h',
        interval: 'Every 12 hours',
        rationale: 'Severe impairment - minimal dosing',
        warnings: ['Very high seizure risk', 'Strongly consider meropenem'],
        monitoring: ['Clinical response', 'Neurological status daily', 'SCr daily', 'EEG if altered mental status'],
        hemodialysisNote: '250-500 mg after each HD session',
      ),
      RenalCategory.esrd: DoseAdjustment(
        antibioticId: 'imipenem',
        antibioticName: 'Imipenem-Cilastatin',
        renalCategory: RenalCategory.esrd,
        normalDose: '500 mg IV q6h or 1 g IV q8h',
        adjustedDose: '250 mg IV q12-24h',
        interval: 'Every 12-24 hours',
        rationale: 'ESRD - avoid if possible',
        warnings: ['Extreme seizure risk', 'Use meropenem instead'],
        monitoring: ['Clinical response', 'Neurological status daily', 'EEG if any CNS symptoms'],
        hemodialysisNote: '250-500 mg after each HD session',
        crrtNote: '250-500 mg IV q6-8h',
      ),
    },
  };
}

